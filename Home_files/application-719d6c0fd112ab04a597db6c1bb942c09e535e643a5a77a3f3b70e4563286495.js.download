function setInputNumber(){$("[type='number']").each(function(){function t(){o.val()>1&&o.val(+o.val()-1)}function e(){o.val(+o.val()+1)}var i=$(this).parents(".strwf__input-wrapper").find(".strwf__input-number__down"),n=$(this).parents(".strwf__input-wrapper").find(".strwf__input-number__up"),o=$(this);i.click(t),n.click(e)})}$.fn.serializeObject=function(){var t={},e=this.serializeArray();return $.each(e,function(){t[this.name]!==undefined?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},EditorPageWidgets=function(){this.constructor=function(){},this.isJsonString=function(t){try{JSON.parse(t)}catch(e){return!1}return!0},this.validateMapStylesJSON=function(t){return this.isJsonString(t)?JSON.parse(t):[]},this.init_text=function(t){t.addEventListener("mousedown",function(){})},this.init_image=function(t){t.addEventListener("mousedown",function(){})},this.init_shape=function(t){t.addEventListener("mousedown",function(){})},this.init_map=function(t){var e=t.querySelector("#map_"+CSS.escape(t.getAttribute("id"))),i=e.dataset,n={center:{lat:parseFloat(i.lat),lng:parseFloat(i.lng)},zoom:parseFloat(i.zoom),zoomControl:JSON.parse(i.controls),mapTypeControl:!1,scaleControl:JSON.parse(i.controls),streetViewControl:!1,rotateControl:JSON.parse(i.controls),fullscreenControl:JSON.parse(i.controls),scrollwheel:JSON.parse(i.zoomonscroll),styles:this.validateMapStylesJSON(i.mapstyles)},o=new window.google.maps.Map(e,n);"standart"===i.mode&&JSON.parse(i.markers).forEach(t=>{t.map=o,new window.google.maps.Marker(t)});if("directions"===i.mode){var a=new window.google.maps.DirectionsService,s=new window.google.maps.DirectionsRenderer;s.setMap(o);var r={origin:i.directionorigin,destination:i.directiondestination,travelMode:i.travelmode};a.route(r,function(t,e){"OK"===e&&s.setDirections(t)})}},this.updateURLParameter=function(t,e,i){var n="",o=t.split("?"),a=o[0],s=o[1],r="";if(s){o=s.split("&");for(var c=0;c<o.length;c++)o[c].split("=")[0]!=e&&(n+=r+o[c],r="&")}return a+"?"+n+(r+""+e+"="+i)},this.init_video=function(t){var e=t.querySelector("iframe");if("inline"===t.dataset.mode){if(t.dataset.autoplay&&JSON.parse(t.dataset.autoplay)){if(t.querySelector(".strw-video__preview-image")&&t.querySelector(".strw-video__preview-image").remove(),t.style.backgroundImage="none",e.src.indexOf("youtube")>-1){var i=this.updateURLParameter(e.src,"mute","true");i=this.updateURLParameter(i,"autoplay","true"),e.src=i}if(e.src.indexOf("vimeo")>-1)new Vimeo.Player(e,{muted:!0}).setVolume(0)}t.querySelector(".strw-video__preview-image")&&t.querySelector(".strw-video__preview-image").addEventListener("click",function(i){if("youtube"===t.dataset.videoType){var n=e.src.split("?"),o=n.length>0?n[0]:e.src;if(e.src=o+"?autoplay=true&mute=true",t.querySelector(".strw-video__preview-image").remove(),t.style.backgroundImage="none",e.src.indexOf("vimeo")>-1){var a=new Vimeo.Player(e);a.on("loaded",function(){setTimeout(function(){a.play()},1e3)})}}"file"===t.dataset.videoType&&(t.querySelector(".strw-video__preview-image").remove(),t.style.backgroundImage=null,t.querySelector("video").play()),i.preventDefault()})}t.dataset},this.init_button=function(){},this.formInvalid=function(t){var e=t.querySelectorAll("input"),i="";return e.forEach(function(t){(t.value||(i+=t.name+" is required.\n"),"email"===t.dataset.type)&&(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,7})+$/.test(t.value)||(i+=t.name+" is invalid.\n"))}),i},this.notify=((t,e,i)=>{clearTimeout(this.notifyTimeout);var n=$(".notification-container"),o=n.find(".notification"),a=n.find(".title"),s=n.find(".message");o.removeClass("notification-success"),o.removeClass("notification-error"),o.addClass("notification-"+t),a.html(e),s.html(i),$(".notification-container").show(),o.css({right:"-500px"}).animate({right:"0px"},"fast"),this.notifyTimeout=setTimeout(()=>{o.animate({right:"-500px"},"fast")},5e3)}),this.notifyHide=(()=>{clearTimeout(this.notifyTimeout),$(".notification-container").find(".notification").animate({right:"-500px"},"fast")}),this.send=function(t,e){var i=this.formInvalid(e);if(i)EditorPageWidgets.notify("error","Error",i);else{$(e).find("[type='submit']").attr("disabled",!0);var n=function(){$(e).data("redirect")?location.href=$(e).data("redirectUrl"):EditorPageWidgets.notify("success","Success","Your request successfully sent!"),$(e).find("[type='submit']").attr("disabled",!1),$(e).find("input, textarea").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")},o=function(){alert("Error"),$(e).find("[type='submit']").attr("disabled",!1)},a={properties:t,form_title:$(e).data("title"),form_id:$(e).parents(".page-content__component").attr("id")};$.ajax({url:"https://api.siter.io/api/sites/"+site_id+"/requests",type:"POST",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json",async:!1,success:n,error:o})}},this._onSubmit=function(t){t.preventDefault(),EditorPageWidgets.send($(t.target).serializeObject(),t.target)},this.init_form=function(t){t.addEventListener("submit",this._onSubmit)},this.init_code=function(){},this.init_slider=function(t){var e={autoplay:JSON.parse(t.dataset.autoplay),pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0,renderBullet:function(e,i){return"<span class="+i+">"+$(t).find("#swiper-pagination-bullet").html()+"</span>"}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},allowTouchMove:t.dataset.allowTouchMove};JSON.parse(t.dataset.autoplay)&&(e.autoplay={delay:1e3*parseInt(t.dataset.delay),disableOnInteraction:t.dataset.disableOnInteraction});new Swiper(t.querySelector(".swiper-container"),e)},this.getCommonRect=function(t){var e=undefined,i=t.map((t,e)=>$(e).offset().left),n=t.map((t,e)=>$(e).offset().left+$(e).width()),o=t.map((t,e)=>$(e).offset().top),a=t.map((t,e)=>$(e).offset().top+$(e).height()),s=Math.min.apply(Math,i),r=Math.max.apply(Math,n),c=Math.min.apply(Math,o),l=Math.max.apply(Math,a);return e={offsetWidth:r-s,offsetHeight:l-c,offsetLeft:s,offsetTop:c,setStyles:function(i){t.each((t,n)=>{if(i.hasOwnProperty("left")&&!isNaN(i.left)&&i.left!==undefined){var o=parseInt($(n).offset().left,10)+(i.left-e.offsetLeft);$(n).css("left",o)}if(i.hasOwnProperty("top")&&!isNaN(i.top)&&i.top!==undefined){var a=parseInt($(n).offset().top,10)+(i.top-e.offsetTop);$(n).css("top",a)}})},setAlign:function(t){switch(t){case"center":e.setStyles({left:window.innerWidth/2-e.offsetWidth/2,top:window.innerHeight/2-e.offsetHeight/2});break;case"top_left":e.setStyles({left:0,top:0});break;case"top_center":e.setStyles({left:window.innerWidth/2-e.offsetWidth/2,top:0});break;case"top_right":e.setStyles({left:window.innerWidth-e.offsetWidth,top:0});break;case"bottom_left":e.setStyles({left:0,top:window.innerHeight-e.offsetHeight});break;case"bottom_center":e.setStyles({left:window.innerWidth/2-e.offsetWidth/2,top:window.innerHeight-e.offsetHeight});break;case"bottom_right":e.setStyles({left:window.innerWidth-e.offsetWidth,top:window.innerHeight-e.offsetHeight});break;default:e.setStyles({left:window.innerWidth/2-e.offsetWidth/2,top:window.innerHeight/2-e.offsetHeight/2})}}}},this.clickLink=function(){var t={popupPosition:"center",overlayColor:"rgba(0, 0, 0, 0.2)",closeClickOutside:!0},e=Object.assign(t,$(this).data());if("close_popup"===e.type)return $.magnificPopup.close(),!1;if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var i=$(this.hash),n=i.data("type");if((i=i.length?i:$("#"+CSS.escape(this.hash.slice(1)))).length){if("popup"===e.type){var o=e.popupPosition,a=e.overlayColor,s=e.closeClickOutside;return $.magnificPopup.close(),$.magnificPopup.open({removalDelay:350,mainClass:"mfp-wrap_link-popup",closeOnBgClick:s,autoFocusLast:!1,showCloseBtn:!1,items:{src:i,type:"inline"},callbacks:{open:function(){$(".mfp-bg").css({background:a}),EditorPageWidgets.getCommonRect(this.content.parent().find(".page-content__component")).setAlign(o),window.dispatchEvent(new Event("resize"))}}}),!1}if("element"===e.type){if("group"===n){var r=EditorPageWidgets.getCommonRect($(i).find(".page-content__component"));$("html, body").animate({scrollTop:r.offsetTop},1e3)}else $("html, body").animate({scrollTop:i.offset().top},1e3);return $.magnificPopup.close(),!1}}}},this.clickGroup=function(){var t=$(this).data(),e=$(this).attr("href"),i=$(this).attr("target")?$(this).attr("target"):"_self",n=document.createElement("a");n.href=e,this.pathname=n.pathname,this.hostname=n.hostname,this.hash=n.hash,["email","phone","link","page"].indexOf(t.type)>-1&&window.open(e,i)},this.bindLinks=function(){$("a[href*=\\#]:not([href=\\#])").click(this.clickLink),$(".str-group__inner-link").click(this.clickGroup),$(".str-group__inner-link[href*=\\#]:not([href=\\#])").click(this.clickLink)},this.hidePopups=function(){$("[data-type='popup']").each(function(){$(this.hash).addClass("mfp-hide")})},this.playSectionsBgVideo=function(){$(".str-section").each(function(t,e){var i={showControls:!1,containment:"self",autoPlay:!1,loop:!0,mute:!0,opacity:1,stopMovieOnBlur:!1,useOnMobile:!1,vol:0,remember_last_time:!1,mobileFallbackImage:$(e).data("video-options").coverImage,onReady:function(){setTimeout(function(){$(e).YTPPlay()})}},n=Object.assign(i,$(e).data("video-options"));n.videoURL.length>0&&$(e).YTPlayer(n)})},this.init=function(){this.bindLinks(),this.hidePopups(),document.querySelectorAll(".page-content__component").forEach(function(t){EditorPageWidgets["init_"+t.dataset.type]&&EditorPageWidgets["init_"+t.dataset.type](t)})}},$(function(){function t(){var t=1,e=1,i=($(".page-content").width(),window.innerWidth);(i<1400&&i>1024||i<1400&&!devices.tablet)&&(t=i/1400,e=1400/i),devices.tablet&&(i<640&&i>480||i<640&&!devices.mobile)&&(t=i/640,e=640/i),i<480&&devices.mobile&&(t=i/375,e=375/i),$('.page-content__component[data-unit="%"]').each(function(){$(this).css("transform","scale("+e+", 1)")}),$("#page-content").css("transform","scale("+t+")")}setInputNumber();var e=$(window).width(),i=$("*").filter(function(){return"fixed"==$(this).css("position")});i.each(function(){$(this).attr("data-position-top",$(this).css("top"))}),$(window).scroll(function(){var t=$(window).scrollTop();i.each(function(){if(t>=0){var e=parseFloat($(this).data("position-top"));$(this).css("top",e+t)}})}),t(),$(window).on("resize",function(){$(window).width()!=e&&(e=$(window).width(),t())}),$(".promotion").on("click",function(t){if($(t.target).hasClass("close")){var e=$(this);e.addClass("closing"),setTimeout(function(){e.remove()},1e3)}else window.location.href=$(this).data("url")})});var EditorPageWidgets=new EditorPageWidgets;EditorPageWidgets.init();